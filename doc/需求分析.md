# 微聊需求

## 用户

### 注册

1. 可以使用手机号、邮箱、注册
2. 手机号需要发送验证码认证
3. 邮箱需要确认，可以是点击确认，也可以是验证码确认
4. 注册添加人机认证（可以使用阿里云的人机认证）。
5. 注册信息包括：手机号、邮箱、密码。
6. 注册成功后直接登陆，并在第一次登陆后需要完事个人信息
7. 注册成功后默认添加`微聊`为好友。（微聊为系统的客服）

### 登陆

1. 可以使用手机号或邮箱+密码的形式登陆，冻结的用户不允许登陆，但会提示冻结结束时间
2. 登陆后返回认证信息，可以使用`JWT`进行身份标识
3. 登陆时可以选择`记住我`标签，在一定时间内免登陆（暂定时间位3天）。
4. 登陆时需要进行人机认证
5. 如果长时间为登陆过，下次登陆需要进行短信或者邮箱认证（暂定时间为3个月）。

 ### 修改个人信息

1. 用户可以修改个人信息，包括头像、昵称
2. 如果要修改的信息是手机号或者邮箱需要进行认证。
3. 真实姓名和身份证号一旦认证不允许修改。

### 实名认证

1. 提交真实姓名和身份证号，进行实名认证。
2. 可以使用聚数据的身份证实名认证功能

### 好友

1. 用户可以通过条件添加好友
2. 用户可以通过手机号或邮箱添加好友
3. 用户和好友间可以相互发送文字，图片、文件等消息
4. 接收到好友消息，将进行通知。
5. 用户可以屏蔽好友，即好友发送的消息将不会通知
6. 用户可以删除好友，删除成功后，被删除的好友将得到消息。
7. 好友状态标识
   1. 在线：用户正在使用微聊界面（`webSocket`保持连接）
   2. 离开：用户打开了微聊界面，但没有使用（鼠标失去焦点）
   3. 离线：用户没有打开微聊界面（`webSocket`断开连接）

### 群聊

1. 创建群聊时为群聊添加标签、群名、可以为群设置密码，创建群聊者则为管理者。
2. 创建成功后，会生成一个群号，以便其他人申请加群
3. 一个群的管理者就是创建群的人
4. 管理者可以发送群公告，发送成功后，群成员在进入的第一次将有一个确认通知框。
5. 管理者有权同意其他人加入群聊，和移除群聊中的人。
6. 群聊只能发送文字。群聊中上传的文件，群成员均可以下载
7. 用户可以将群屏蔽
8. 用户可以主动退出群，有成员退出群，管理者将收到消息
9. 管理者可以解散群，解散群后，群成员都将得到消息



## 平台管理者

### 登陆

1. 平台管理者使用账号+密码登陆
2. 平台账号只能由超级管理员添加，同时赋予密码
3. 添加管理员时需要添加手机号、真实姓名
4. 平台管理者登录后可以修改自己的密码

### 权限

1. 平台管理员有权停用某个用户、某个群聊、但要给出停用理由。



